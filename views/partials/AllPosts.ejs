<style>
  .card+.card {
    margin-right: 1rem;
  }
</style>

<section class="container">
  <div class="d-flex flex-wrap container-fluid align-items-stretch gap-3">

    <% if (posts.length > 0) { %>
    <% for (let i = 0; i < posts.length; i++) {%>
    <div class="card col-12 col-md-6 col-lg-3 flex-fill">
      <div class="card-header d-flex col-gap-2 flex-wrap">
        <span class="flex-grow-1">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z" />
            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z" />
          </svg>
          <%= posts[i].displayAuthor%>
        </span>
        <div class="d-flex flex-column">

          <span class="d-flex align-items-center column-gap-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clock-fill" viewBox="0 0 16 16">
              <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z" />
            </svg>
            <%= new Date(posts[i].createdAt).toLocaleString()%>
          </span>
        </div>
      </div>
      <div class="card-body">
        <h5 class="card-title"><%= posts[i].title %></h5>
        <p class="card-text"><%= posts[i].content %></p>
      </div>
      <% if(posts[i].prevUpdatedAt){%>
      <div class="card-footer">

        <span class="d-flex align-items-center column-gap-1">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pencil-fill" viewBox="0 0 16 16">
            <path d="M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z" />
          </svg>
          <% const updatedDiff = dateDiff(posts[i].updatedAt) %>
          <% if(updatedDiff.day > 0) {%>
          <% const unit = updatedDiff.day > 1 ? "days":"day"%>
          <%= `${updatedDiff.day} ${unit}`%>
          <%}else{%>

          <%# show hour %>
          <% if(updatedDiff.hour>0){%>
          <% const unit = updatedDiff.hour > 1 ? "hrs" : "hr" %>
          <%= `${updatedDiff.hour} ${unit}`%>
          <%}%>
            <%# show minute %>
          <% if(updatedDiff.minute>0){%>
          <% const unit = updatedDiff.minute > 1 ? "mins" : "min" %>

          <%= `${updatedDiff.minute} ${unit}`%>
          <%}%>
            <%# show second %>
          <% if(updatedDiff.second>0){%>
          <% const unit = updatedDiff.second > 1 ? "secs" : "sec" %>
          <%= `${updatedDiff.second} ${unit}`%> ago
          <%}%>
          <%}%>
        </span>

      </div>
      <%}%>
      </div>
      <% } %>
      <% } %>
    </div>
</section>